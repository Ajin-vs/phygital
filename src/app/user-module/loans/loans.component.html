<div class="pb-5">
    <div class="container">
        <p-toast position="center"></p-toast>
    </div>
<!-- <div class="d-flex flex-column w-25 ms-auto p-2">
    <h4  (click)="changeMode(item.value)"  *ngFor="let item of justifyOptions "  class="text-center mb-2 rounded crs shadow " [ngClass]="(mode==item.value) ? 'bg-success border' : 'bg-info'"><strong class="badge text-center crs" >{{item.label}}</strong></h4>
 -->
<!-- </div> -->
<h4 class="text-center pt-3 pb-2">Loan Repayment History</h4>
<hr >
<!-- <div class="d-flex flex-column float-end justify-content-between mb-2 me-3">
    <h4  (click)="changeMode(item.value)"  *ngFor="let item of justifyOptions "  class="text-center mb-2 rounded crs shadow" [ngClass]="(mode==item.value) ? 'bg-success border' : 'bg-info'"><strong class="badge text-center crs" >{{item.label}}</strong></h4>
  
</div> -->
<p-dialog header="Loan Due Amount" [(visible)]="displayModal" [modal]="true" [style]="{width: '95%'}"
[draggable]="false" [resizable]="false" styleClass="position-absolute ">
<form  [formGroup]="loanForm" (ngSubmit)="onSubmit()">
    
        <label for="otp"><small class="text-danger">*</small><strong> Amount:</strong></label>
        <input type="number" id="otp" class="form-control" ng-maxlength="5" [autofocus]=true  formControlName="amount">
        <!-- <label for="amount"><small class="text-danger">*</small><strong> Amount:</strong></label>
        <input type="number" id="amount" class="form-control"  formControlName="amount"> -->
        <div *ngIf="loanForm.invalid && loanForm.touched" class="text-danger">
           Enter the required Fileds
          </div>
  
   
    <hr>
    <button *ngIf="!validate"  icon="pi pi-check" styleClass="p-button-text"
            class="btn  btn-dark mt-2 float-end" type="submit" > Submit</button>
            <i *ngIf="validate"  style="font-size: 1.5rem"
            class="pi pi-spin pi-spinner mt-2 float-end" > </i>

        </form> 

</p-dialog>
<div class="p-3 ">
    <table class="table table-bordered text-center  border-3 border-dark mt-2 mb-5">
        <thead>
            <tr>
                <th scope="col">Date</th>
                <th scope="col">Amount</th>
                <th scope="col">Pay</th>
                <th scope="col">Status</th>
            </tr>
        </thead>
       <tbody>
        <tr *ngFor ="let loanhistory of loanrepaymenthistory  let ind = index">
            <td >{{ getDate(loanDetails[0].startDate,ind) | date | slice : 0:12}}</td>
        
            <td >{{loanhistory.id.scheduledEmi !== -1 ? loanhistory.id.scheduledEmi: 'TBD'}}</td>
            <!-- <td *ngIf="loanhistory.id.scheduledEmi !== -1">{{loanhistory.id.scheduledEmi}}</td> -->
            <td  *ngIf="loanhistory.id.scheduledEmi === -1" ></td>
            <td *ngIf="loanhistory.id.scheduledEmi !== -1" (click)="paid(loanhistory.paymentMode,ind,loanhistory.id.scheduledEmi)"><i class="pi" style="font-size: 1.5 rem;" [ngClass]="(loanhistory.paymentMode !== 'offline' && loanhistory.paymentMode !== 'CBDC') ?'pi-qrcode ' :'pi-check-circle text-success'" ></i></td>
            <td *ngIf="loanhistory.paymentMode == null && getDate(loanDetails[0].startDate,ind) < crtDate"><strong class="text-danger">DUE</strong> </td>
            <td *ngIf="loanhistory.paymentMode == null && getDate(loanDetails[0].startDate,ind) > crtDate"><strong class="text-primary">PAY</strong> </td>
            <td *ngIf="loanhistory.paymentMode == 'offline'"><strong class="text-paidOffline">PAID OFFLINE</strong> </td>
            <td *ngIf="loanhistory.paymentMode == 'CBDC'"><strong class="text-success">PAID</strong> </td>
        </tr>
       
        
       </tbody>
    </table>
</div>

</div>